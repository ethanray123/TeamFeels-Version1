{% extends 'base.html' %}
{% load static %}
{% block additionalCss %}
    <link rel="stylesheet" type="text/css" href="{% static 'stream/lobby.css' %}">
{% endblock additionalCss %}
{% block title %}Lobby: {{lobby}}{% endblock title %}

{% block content %}
    {% if user.is_authenticated %}
        {% if error_message %}
        <p><strong>{{ error_message }}</strong></p>
        {% endif %}
        {% if lobby %}
        <h3>Live now in {{lobby}}</h3>
        <div class="row">
        <ul class="collection">
            <li class="collection-item col m4">
                <ul>
                {% for stream in lobby.streamers %}
                    {% if stream.title != "" and stream.thumbnail != Null %}
                        <li>
                            <h5>{{stream.title}}</h5> 
                            <a href="{% url 'stream:streamer-detail' stream.streamers.id %}">{{stream}}</a> <br>
                            <img class="thumbnail" src="{{stream.thumbnail.url}}">
                            <br>
                            {% if stream.streamers.user.id != request.user.id%}
                            <a href="{% url 'stream:subscribe' stream.streamers.id lobby.id %}" class="btn"><i class="tiny material-icons">star</i></a>
                            {% endif %}
                            {% if lobby.owner == request.user %}
                                <a href="" class="btn"><i class="tiny material-icons">edit</i></a>
                            {% endif %}
                        </li>
                        <br>
                    {% endif %}
                {% endfor %}
                </ul>
            </li>
            <div class="collection-item col m8">
                <!-- Video goes here -->
            </div>
        </ul>
        </div>
        {% else %}
        <h3>404 lobby not found</h3>
        {% endif %}
    {% else %}
        <h3>You are not logged in...</h3>
        <a href="{% url 'login' %}" class="btn">login</a>
    {% endif %}
{% endblock content %}
